(function(){"use strict";var t={3371:function(t,n,e){var i=e(9242),r=e(3396);const o={id:"app"};function a(t,n,e,i,a,s){const c=(0,r.up)("SharedWhiteboard");return(0,r.wg)(),(0,r.iD)("div",o,[(0,r.Wm)(c)])}var s=e(7139);const c={class:"toolbar",id:"toolbar"},d=["onClick"];function u(t,n,e,i,o,a){return(0,r.wg)(),(0,r.iD)("div",null,[(0,r._)("div",c,[((0,r.wg)(),(0,r.iD)(r.HY,null,(0,r.Ko)([1,2,5,10,20],(t=>(0,r._)("button",{key:t,onClick:n=>o.penSize=t,class:(0,s.C_)([{active:!o.eraser&&o.penSize===t},"pen-size-btn"])},(0,s.zw)(t),11,d))),64)),(0,r._)("button",{onClick:n[0]||(n[0]=t=>o.eraser=!o.eraser),class:(0,s.C_)([{active:o.eraser},"eraser-btn"])}," Eraser ",2)]),(0,r._)("canvas",{ref:"canvas",onMousedown:n[1]||(n[1]=(...t)=>a.startDrawing&&a.startDrawing(...t)),onMousemove:n[2]||(n[2]=(...t)=>a.draw&&a.draw(...t)),onMouseup:n[3]||(n[3]=(...t)=>a.stopDrawing&&a.stopDrawing(...t))},null,544)])}var h=e(8558),l={data(){return{socket:null,canvas:null,context:null,drawing:!1,penSize:1,startX:0,startY:0,eraser:!1,initialLoad:!0}},methods:{startDrawing(t){this.drawing=!0,this.startX=t.clientX,this.startY=t.clientY-30},draw(t){if(!this.drawing)return;const n=t.clientX,e=t.clientY-30;this.drawLine(this.startX,this.startY,n,e,this.penSize,!0,this.eraser),this.startX=n,this.startY=e},stopDrawing(){this.drawing&&(this.drawing=!1)},drawLine(t,n,e,i,r,o=!0,a=!1){this.context.globalCompositeOperation=a?"destination-out":"source-over",this.context.lineWidth=r,this.context.lineCap="round",this.context.beginPath(),this.context.moveTo(t,n),this.context.lineTo(e,i),this.context.stroke(),this.context.closePath(),o&&this.socket.emit("draw",{startX:t,startY:n,endX:e,endY:i,penSize:r,isEraser:a})}},mounted(){this.socket=(0,h.ZP)("http://doodle-api.barkle.chat"),this.socket.on("draw",(t=>{this.drawLine(t.startX,t.startY,t.endX,t.endY,t.penSize,!1,t.isEraser)})),this.initialLoad&&(this.socket.on("load",(t=>{for(let n of t)this.drawLine(n.startX,n.startY,n.endX,n.endY,n.penSize,!1,n.isEraser);this.initialLoad=!1})),this.socket.emit("load")),this.canvas=this.$refs.canvas,this.context=this.canvas.getContext("2d"),this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight,window.addEventListener("resize",(()=>{this.canvas.width=window.innerWidth,this.canvas.height=window.innerHeight}))}},f=e(89);const v=(0,f.Z)(l,[["render",u],["__scopeId","data-v-63894a87"]]);var w=v,p={components:{SharedWhiteboard:w}};const g=(0,f.Z)(p,[["render",a]]);var b=g;(0,i.ri)(b).mount("#app")}},n={};function e(i){var r=n[i];if(void 0!==r)return r.exports;var o=n[i]={exports:{}};return t[i].call(o.exports,o,o.exports,e),o.exports}e.m=t,function(){var t=[];e.O=function(n,i,r,o){if(!i){var a=1/0;for(u=0;u<t.length;u++){i=t[u][0],r=t[u][1],o=t[u][2];for(var s=!0,c=0;c<i.length;c++)(!1&o||a>=o)&&Object.keys(e.O).every((function(t){return e.O[t](i[c])}))?i.splice(c--,1):(s=!1,o<a&&(a=o));if(s){t.splice(u--,1);var d=r();void 0!==d&&(n=d)}}return n}o=o||0;for(var u=t.length;u>0&&t[u-1][2]>o;u--)t[u]=t[u-1];t[u]=[i,r,o]}}(),function(){e.n=function(t){var n=t&&t.__esModule?function(){return t["default"]}:function(){return t};return e.d(n,{a:n}),n}}(),function(){e.d=function(t,n){for(var i in n)e.o(n,i)&&!e.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:n[i]})}}(),function(){e.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){e.o=function(t,n){return Object.prototype.hasOwnProperty.call(t,n)}}(),function(){e.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})}}(),function(){var t={143:0};e.O.j=function(n){return 0===t[n]};var n=function(n,i){var r,o,a=i[0],s=i[1],c=i[2],d=0;if(a.some((function(n){return 0!==t[n]}))){for(r in s)e.o(s,r)&&(e.m[r]=s[r]);if(c)var u=c(e)}for(n&&n(i);d<a.length;d++)o=a[d],e.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return e.O(u)},i=self["webpackChunkdoodle"]=self["webpackChunkdoodle"]||[];i.forEach(n.bind(null,0)),i.push=n.bind(null,i.push.bind(i))}();var i=e.O(void 0,[998],(function(){return e(3371)}));i=e.O(i)})();
//# sourceMappingURL=app.3ba916be.js.map